<HTML>
<HEAD>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type='text/javascript' src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type='text/javascript' src="bower_components/Flot/jquery.flot.js"></script>
    <script type='text/javascript' src="bower_components/Flot/jquery.flot.time.js"></script>
	<script type="text/javascript">

	$(function() {

        String.prototype.lpad = function(padString, length) {
            var str = this;
            while (str.length < length)
                str = padString + str;
            return str;
        }

        $("<div id='tooltip'></div>").css({
			position: "absolute",
			display: "none",
			border: "1px solid #fdd",
			padding: "2px",
			"background-color": "#fee",
			opacity: 0.80
		}).appendTo("body");

        $("#placeholder").bind("plothover", function (event, pos, item) {

			var str = "(" + pos.x.toFixed(2) + ", " + pos.y.toFixed(2) + ")";
			$("#hoverdata").text(str);

			if (item) {
				var x = new Date(item.datapoint[0]),
					y = item.datapoint[1].toFixed(2);

                hrs = x.getHours().toString();
                mins = x.getMinutes().toString();
                ttime = hrs.lpad("0",2) + ":" + mins.lpad("0", 2);
				$("#tooltip").html(item.series.label + " at " + ttime + " = " + y)
					.css({top: item.pageY+5, left: item.pageX+5})
					.fadeIn(200);
			} else {
				$("#tooltip").hide();
			}
	});

		var options = {
			lines: {
				show: false
			},
			points: {
				show: true
			},
            grid: {
                hoverable: true
            },
			xaxis: {
                mode: "time",
                timezone: "browser",
			}
		};

		function onDataReceived(series) {
			data = [ series ];
			$.plot("#placeholder", data, options);
		}

		$.ajax({
			url: "/pressure.json",
			type: "GET",
			dataType: "json",
			success: onDataReceived
		});
    });
    </script>

    <TITLE>Flot test page</TITLE>
</HEAD>
<body>
    test here.
    <div id="placeholder" style="width:800px;height:400px"></div>

</body></HTML>
